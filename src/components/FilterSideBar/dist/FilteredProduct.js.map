{"version":3,"sources":["FilteredProduct.tsx"],"names":[],"mappings":"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","file":"FilteredProduct.js","sourcesContent":["import { Product } from \"@/features/product/product\";\r\nimport { fetchProducts } from \"@/features/product/productSlice\";\r\nimport { RootState } from \"@/redux/store\";\r\nimport Link from \"next/link\";\r\nimport React, { useState, useEffect, FC } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ProductCard } from \"@/features/product/ProductCard\";\r\nimport baseUrl from \"../../../utils/baseUrl\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nexport const FilteredProduct = ({\r\n  categoryId,\r\n  brand,\r\n  subcategory,\r\n  minValue,\r\n  maxValue,\r\n  inStock,\r\n  onSale,\r\n  perpage,\r\n  page,\r\n  orderby,\r\n}: any) => {\r\n  const [product, setProduct] = useState([]);\r\n\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        let url = `${baseUrl}/productDetails?`;\r\n\r\n        if (categoryId) {\r\n          url += `categoryId=${categoryId}`;\r\n        }\r\n        if (subcategory) {\r\n          url += `&subCategories=${subcategory}`;\r\n        }\r\n        if (brand) {\r\n          url += `&brands=${brand}`;\r\n        }\r\n        if (minValue && maxValue) {\r\n          url += `&min_price=${minValue}&max_price=${maxValue}`;\r\n        }\r\n        if (inStock) {\r\n          url += `&stock_status=true`;\r\n        }\r\n        if (onSale) {\r\n          url += `&on_sale=true`;\r\n        }\r\n        if (orderby) {\r\n          url += `&sort=${orderby}`;\r\n        }\r\n\r\n        if (page) {\r\n          url += `&page=${page}`;\r\n        }\r\n        if (perpage) {\r\n          url += `&perpage=${perpage}`;\r\n        }\r\n\r\n        const response = await axios.get(url);\r\n        const products = response.data.products;\r\n        console.log(\"response.data: \", response.data.products);\r\n        setProduct(products);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [\r\n    categoryId,\r\n    brand,\r\n    subcategory,\r\n    minValue,\r\n    maxValue,\r\n    inStock,\r\n    onSale,\r\n    page,\r\n    perpage,\r\n    orderby,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!perpage) {\r\n      const fetchData = async () => {\r\n        try {\r\n          const response = await axios.get(\r\n            `${baseUrl}/products?sort=${orderby}&page=${page}`\r\n          );\r\n          console.log(\"!perpage\");\r\n          const products = response.data.products;\r\n          setProduct(products);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      };\r\n      fetchData();\r\n    } else if (perpage || orderby) {\r\n      const fetchData = async () => {\r\n        console.log(\"sssssss 1: \", page);\r\n        console.log(\"sssssss 2: \", perpage);\r\n        try {\r\n          const response = await axios.get(\r\n            `${baseUrl}/products?sort=${orderby}&page=${page}&perpage=${perpage}`\r\n          );\r\n          console.log(\"perpage || page || orderby\");\r\n\r\n          const products = response.data.products;\r\n          console.log(\"sssssss 3: \", products);\r\n          if (products.length == 0) {\r\n            console.log(\"bhebhd\");\r\n          }\r\n\r\n          setProduct(products);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      };\r\n      fetchData();\r\n    }\r\n  }, [perpage, page, orderby]);\r\n\r\n  return (\r\n    <div>\r\n      {product.length != 0 ? (\r\n        <div className=\"mx-auto \">\r\n          <div className=\"grid lg:grid-cols-4 md:grid-cols-3 grid-cols-2 \">\r\n            {product.map((product: any, index) => {\r\n              return <ProductCard key={product.id} product={product} />;\r\n            })}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p>No results found</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"]}