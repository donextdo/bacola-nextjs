{"version":3,"sources":["RangeSlider.tsx"],"names":[],"mappings":"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","file":"RangeSlider.js","sourcesContent":["import { useRouter } from \"next/router\";\r\nimport { useState, useEffect, useRef, ReactElement } from \"react\";\r\nimport { ChangeEvent } from \"react\";\r\nimport baseUrl from \"../../../utils/baseUrl\";\r\nimport axios from \"axios\";\r\nexport const RangeSlider = ({ categoryId }: any) => {\r\n  const [minValue, setMinValue] = useState(0);\r\n  const [maxValue, setMaxValue] = useState(50);\r\n  const [maxPriceValue, setMaxPriceValue] = useState(0);\r\n  const progressRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (categoryId) {\r\n      const fetchData = async () => {\r\n        const response = await axios(\r\n          `${baseUrl}/productDetails?categoryId=${categoryId}`\r\n        );\r\n        const products = response.data.products;\r\n\r\n        // Extracting all the product prices\r\n        const prices = products.map((product) => product.price);\r\n\r\n        // Finding the maximum price\r\n        const maxPrice = Math.max(...prices);\r\n\r\n        // Rounding the maximum price\r\n        let roundedPrice;\r\n\r\n        roundedPrice = Math.ceil(maxPrice / 10) * 10;\r\n        // setMaxPriceValue(roundedPrice);\r\n        // setMaxValue(maxPriceValue);\r\n        console.log(\"Rounded maximum price: \", roundedPrice);\r\n      };\r\n\r\n      fetchData();\r\n    }\r\n  }, []);\r\n\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const { query } = router;\r\n    const minPrice = Number(query.min_price);\r\n    const maxPrice = Number(query.max_price);\r\n\r\n    if (!isNaN(minPrice) && !isNaN(maxPrice)) {\r\n      setMinValue(minPrice);\r\n      setMaxValue(maxPrice);\r\n    }\r\n  }, [router.query]);\r\n  const handleMin = (e: ChangeEvent<HTMLInputElement>) => {\r\n    e.persist();\r\n    e.preventDefault();\r\n    const newMinValue = parseInt(e.target.value);\r\n    if (maxValue - newMinValue >= 0 && maxValue <= 50) {\r\n      if (newMinValue > parseInt(maxValue.toString())) {\r\n        // Ignore invalid input\r\n      } else {\r\n        setMinValue(newMinValue);\r\n        updatePriceQuery(newMinValue, maxValue);\r\n      }\r\n    } else {\r\n      if (newMinValue < minValue) {\r\n        setMinValue(newMinValue);\r\n        updatePriceQuery(newMinValue, maxValue);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleMax = (e: ChangeEvent<HTMLInputElement>) => {\r\n    e.persist();\r\n    e.preventDefault();\r\n    const newMaxValue = parseInt(e.target.value);\r\n    if (newMaxValue - minValue >= 0 && newMaxValue <= 50) {\r\n      if (newMaxValue < parseInt(minValue.toString())) {\r\n        // Ignore invalid input\r\n      } else {\r\n        setMaxValue(newMaxValue);\r\n        updatePriceQuery(minValue, newMaxValue);\r\n      }\r\n    } else {\r\n      if (newMaxValue > maxValue) {\r\n        setMaxValue(newMaxValue);\r\n        updatePriceQuery(minValue, newMaxValue);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (progressRef.current) {\r\n      progressRef.current.style.left = `${(minValue / 50) * 100}%`;\r\n      progressRef.current.style.right = `${(1 - maxValue / 50) * 100}%`;\r\n    }\r\n  }, [minValue, maxValue]);\r\n\r\n  const updatePriceQuery = (min: number, max: number) => {\r\n    router.push(\r\n      {\r\n        pathname: router.pathname,\r\n        query: {\r\n          ...router.query,\r\n          min_price: min,\r\n          max_price: max,\r\n        },\r\n      },\r\n      undefined,\r\n      { scroll: false }\r\n    );\r\n  };\r\n\r\n  const setPriceQuery = () => {\r\n    router.push({\r\n      pathname: router.pathname,\r\n      query: {\r\n        ...router.query,\r\n        min_price: minValue,\r\n        max_price: maxValue,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"box-border max-h-[85px] max-w-[270px] lg:mt-12  \">\r\n      <h4 className=\"max-h-[18px] max-w-[270px] uppercase tracking-[0] font-[600] text-[.9375rem] mb-[1.25rem] font-ff-headings\">\r\n        filter by price\r\n      </h4>\r\n\r\n      <div className=\"mb-4 max-h-[47px] max-w-[270px]\">\r\n        <div className=\"slider relative h-1 rounded-md bg-gray-300\">\r\n          <div\r\n            className=\"progress absolute h-1 bg-black rounded\"\r\n            ref={progressRef}\r\n          ></div>\r\n        </div>\r\n        <div className=\"range-input relative\">\r\n          <input\r\n            onChange={handleMin}\r\n            type=\"range\"\r\n            value={minValue}\r\n            min={0}\r\n            step={10}\r\n            max={50}\r\n            className=\"range-min absolute\r\n             w-full -top-1 h-1 bg-transparent appearance-none pointer-events-none \"\r\n            placeholder=\"Select a minimum value\"\r\n          />\r\n\r\n          <input\r\n            onChange={handleMax}\r\n            type=\"range\"\r\n            value={maxValue}\r\n            min={0}\r\n            step={10}\r\n            max={50}\r\n            className=\"range-max absolute\r\n             w-full -top-1 h-1 bg-transparent appearance-none pointer-events-none\"\r\n            placeholder=\"Select a maximum value\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"max-h-[47px] max-w[270px]\">\r\n        <div className=\"max-h-[18px] max-w[270px] grid gap-0 grid-cols-2 \">\r\n          <div className=\"text-[.75rem]  mt-1 capitalize text-gray-400\">\r\n            price:\r\n            <span className=\"text-black font-semibold\">\r\n              {\" \"}\r\n              ${minValue}\r\n            </span> -{\" \"}\r\n            <span className=\"text-black font-semibold\"> ${maxValue}</span>\r\n          </div>\r\n          <div className=\" ml-16 \">\r\n            <button\r\n              type=\"button\"\r\n              className=\"uppercase text-[.75rem] ml-3 font-semibold\"\r\n              onClick={setPriceQuery}\r\n            >\r\n              filter\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]}