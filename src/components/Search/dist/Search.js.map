{"version":3,"sources":["Search.tsx"],"names":[],"mappings":"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","file":"Search.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { FiSearch } from \"react-icons/fi\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nimport baseUrl from \"../../../utils/baseUrl\";\r\nimport axios from \"axios\";\r\n// import socketIOClient from \"socket.io-client\";\r\n\r\ninterface Item {\r\n  _id: string;\r\n  title: string;\r\n  price: number;\r\n  front: string;\r\n  discount: number;\r\n}\r\n\r\nexport const SearchItem = () => {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState([]);\r\n  const [isHide, setIsHide] = useState(false);\r\n\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const search = async () => {\r\n      if (query.trim() === \"\") {\r\n        setResults([]);\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post(`${baseUrl}/products/searchBySocket`, {\r\n        query,\r\n      });\r\n      const Products = response.data;\r\n\r\n      setResults(Products);\r\n    };\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      search();\r\n    }, 500);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [query]);\r\n\r\n  const handleInputChange = (e: any) => {\r\n    setQuery(e.target.value);\r\n  };\r\n\r\n  const sendView = (itemId: any) => {\r\n    setIsHide(true);\r\n    router.push(`/item-preview/${itemId}`);\r\n    setQuery(\"\");\r\n    setIsHide(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col xl:w-[500px] w-full md:w-full lg:w-96 place-content-center relative\">\r\n      <div className=\"flex relative w-full\">\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={handleInputChange}\r\n          placeholder=\"Search products...\"\r\n          className=\"bg-gray-100 rounded-tl rounded-bl min-h-[60px] md:w-full lg-w-full w-1/2 pl-5 text-sm focus:outline-none \"\r\n        />\r\n        <div className=\"bg-gray-100 rounded-br rounded-tr min-h-[60px] min-w-[60px]  flex items-center justify-center hover:cursor-pointer\">\r\n          <FiSearch\r\n            type=\"submit\"\r\n            className=\"min-h-[36px] min-w-[24px] text-blue-900 \"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {results.length > 0 && query !== \"\" && !isHide && (\r\n        <div className=\"flex flex-col w-full md:w-full\">\r\n          <ul className=\"absolute bg-white border-2 border-gray-100 w-full z-50\">\r\n            {results.map((item: Item, index: number) => (\r\n              <div\r\n                className=\"flex flex-row items-center justify-between py-1\"\r\n                key={index}\r\n              >\r\n                <div className=\"flex items-center\">\r\n                  <li className=\"cursor-pointer text-start ml-2 border border-gray-100 py-1\">\r\n                    <Image\r\n                      width={40}\r\n                      height={40}\r\n                      src={item.front}\r\n                      alt={item.title}\r\n                    />\r\n                  </li>\r\n\r\n                  <li\r\n                    className=\"cursor-pointer text-start ml-2 flex-1 hover:underline text-sm font-medium\"\r\n                    onClick={() => sendView(item?._id)}\r\n                  >\r\n                    {item.title}\r\n                  </li>\r\n                </div>\r\n                <div className=\"flex flex-col\">\r\n                  <li className=\"cursor-pointer text-end text-sm text-gray-400 font-semibold line-through mr-2 text-[14px] font-ff-headings\">\r\n                    RS {item.price}\r\n                  </li>\r\n                  <li className=\"cursor-pointer text-end text-red-600 text-sm font-semibold mr-2 font-ff-headings\">\r\n                    Rs\r\n                    {(item.price - item.price * (item.discount / 100)).toFixed(\r\n                      2\r\n                    )}\r\n                  </li>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"]}