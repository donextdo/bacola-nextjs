{"version":3,"sources":["Search.tsx"],"names":["react_1","require","fi_1","image_1","router_1","baseUrl_1","axios_1","exports","SearchItem","_a","useState","query","setQuery","_b","results","setResults","_c","isHide","setIsHide","router","useRouter","useEffect","timeoutId","setTimeout","__awaiter","trim","post","response","sent","Products","data","clearTimeout","createElement","className","type","value","onChange","e","target","placeholder","FiSearch","length","map","item","index","key","width","height","src","front","alt","title","onClick","itemId","push","sendView","_id","price","discount","toFixed"],"mappings":"y7CAAA,IAAAA,QAAAC,QAAA,SACAC,KAAAD,QAAA,kBAEAE,QAAAF,QAAA,cACAG,SAAAH,QAAA,eAEAI,UAAAJ,QAAA,0BACAK,QAAAL,QAAA,SAWaM,QAAAC,WAAa,WAClB,IAAAC,EAAAT,QAAAU,SAAA,IAACC,EAAAF,EAAA,GAAOG,EAAAH,EAAA,GACRI,EAAAb,QAAAU,SAAA,IAACI,EAAAD,EAAA,GAASE,EAAAF,EAAA,GACVG,EAAAhB,QAAAU,UAAA,GAACO,EAAAD,EAAA,GAAQE,EAAAF,EAAA,GAETG,EAASf,SAAAgB,YAEfpB,QAAAqB,UAAU,WACR,IAcMC,EAAYC,WAAW,WAddC,eAAA,OAAA,OAAA,EAAA,8EACb,MAAqB,KAAjBb,EAAMc,QACRV,EAAW,IACX,CAAA,IAGe,CAAA,EAAMT,QAAA,QAAMoB,KAAQrB,UAAA,QAAO,2BAA4B,CACtEM,MAAKA,mBADDgB,EAAWlB,EAAAmB,OAGXC,EAAWF,EAASG,KAE1Bf,EAAWc,aAKV,KAEH,OAAO,WACLE,aAAaT,KAEd,CAACX,IAaJ,OACEX,QAAA,QAAAgC,cAAA,MAAA,CAAKC,UAAU,qFACbjC,QAAA,QAAAgC,cAAA,MAAA,CAAKC,UAAU,wBACbjC,QAAA,QAAAgC,cAAA,QAAA,CACEE,KAAK,OACLC,MAAOxB,EACPyB,SAjBkB,SAACC,GACzBzB,EAASyB,EAAEC,OAAOH,QAiBZI,YAAY,qBACZN,UAAU,8GAEZjC,QAAA,QAAAgC,cAAA,MAAA,CAAKC,UAAU,sHACbjC,QAAA,QAAAgC,cAAC9B,KAAAsC,SAAQ,CACPN,KAAK,SACLD,UAAU,+CAKE,EAAjBnB,EAAQ2B,QAAwB,KAAV9B,IAAiBM,GACtCjB,QAAA,QAAAgC,cAAA,MAAA,CAAKC,UAAU,kCACbjC,QAAA,QAAAgC,cAAA,KAAA,CAAIC,UAAU,0DACXnB,EAAQ4B,IAAI,SAACC,EAAYC,GAAkB,OAC1C5C,QAAA,QAAAgC,cAAA,MAAA,CACEC,UAAU,kDACVY,IAAKD,GAEL5C,QAAA,QAAAgC,cAAA,MAAA,CAAKC,UAAU,qBACbjC,QAAA,QAAAgC,cAAA,KAAA,CAAIC,UAAU,8DACZjC,QAAA,QAAAgC,cAAC7B,QAAA,QAAK,CACJ2C,MAAO,GACPC,OAAQ,GACRC,IAAKL,EAAKM,MACVC,IAAKP,EAAKQ,SAIdnD,QAAA,QAAAgC,cAAA,KAAA,CACEC,UAAU,4EACVmB,QAAS,WAAA,IAAA3C,EAAM,OA7ChB,SAAC4C,GAChBnC,GAAU,GACVC,EAAOmC,KAAK,iBAAiBD,GAC7BzC,EAAS,IACTM,GAAU,GAyCqBqC,CAAa,QAAL9C,EAACkC,SAAI,IAAAlC,OAAA,EAAAA,EAAE+C,OAE7Bb,EAAKQ,QAGVnD,QAAA,QAAAgC,cAAA,MAAA,CAAKC,UAAU,iBACbjC,QAAA,QAAAgC,cAAA,KAAA,CAAIC,UAAU,oHACRU,EAAKc,OAEXzD,QAAA,QAAAgC,cAAA,KAAA,CAAIC,UAAU,0FAEVU,EAAKc,MAAQd,EAAKc,OAASd,EAAKe,SAAW,MAAMC,QACjD","file":"Search.min.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { FiSearch } from \"react-icons/fi\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nimport baseUrl from \"../../../utils/baseUrl\";\r\nimport axios from \"axios\";\r\n// import socketIOClient from \"socket.io-client\";\r\n\r\ninterface Item {\r\n  _id: string;\r\n  title: string;\r\n  price: number;\r\n  front: string;\r\n  discount: number;\r\n}\r\n\r\nexport const SearchItem = () => {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState([]);\r\n  const [isHide, setIsHide] = useState(false);\r\n\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const search = async () => {\r\n      if (query.trim() === \"\") {\r\n        setResults([]);\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post(`${baseUrl}/products/searchBySocket`, {\r\n        query,\r\n      });\r\n      const Products = response.data;\r\n\r\n      setResults(Products);\r\n    };\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      search();\r\n    }, 500);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [query]);\r\n\r\n  const handleInputChange = (e: any) => {\r\n    setQuery(e.target.value);\r\n  };\r\n\r\n  const sendView = (itemId: any) => {\r\n    setIsHide(true);\r\n    router.push(`/item-preview/${itemId}`);\r\n    setQuery(\"\");\r\n    setIsHide(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col xl:w-[500px] w-full md:w-full lg:w-96 place-content-center relative\">\r\n      <div className=\"flex relative w-full\">\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={handleInputChange}\r\n          placeholder=\"Search products...\"\r\n          className=\"bg-gray-100 rounded-tl rounded-bl min-h-[60px] md:w-full lg-w-full w-1/2 pl-5 text-sm focus:outline-none \"\r\n        />\r\n        <div className=\"bg-gray-100 rounded-br rounded-tr min-h-[60px] min-w-[60px]  flex items-center justify-center hover:cursor-pointer\">\r\n          <FiSearch\r\n            type=\"submit\"\r\n            className=\"min-h-[36px] min-w-[24px] text-blue-900 \"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {results.length > 0 && query !== \"\" && !isHide && (\r\n        <div className=\"flex flex-col w-full md:w-full\">\r\n          <ul className=\"absolute bg-white border-2 border-gray-100 w-full z-50\">\r\n            {results.map((item: Item, index: number) => (\r\n              <div\r\n                className=\"flex flex-row items-center justify-between py-1\"\r\n                key={index}\r\n              >\r\n                <div className=\"flex items-center\">\r\n                  <li className=\"cursor-pointer text-start ml-2 border border-gray-100 py-1\">\r\n                    <Image\r\n                      width={40}\r\n                      height={40}\r\n                      src={item.front}\r\n                      alt={item.title}\r\n                    />\r\n                  </li>\r\n\r\n                  <li\r\n                    className=\"cursor-pointer text-start ml-2 flex-1 hover:underline text-sm font-medium\"\r\n                    onClick={() => sendView(item?._id)}\r\n                  >\r\n                    {item.title}\r\n                  </li>\r\n                </div>\r\n                <div className=\"flex flex-col\">\r\n                  <li className=\"cursor-pointer text-end text-sm text-gray-400 font-semibold line-through mr-2 text-[14px] font-ff-headings\">\r\n                    RS {item.price}\r\n                  </li>\r\n                  <li className=\"cursor-pointer text-end text-red-600 text-sm font-semibold mr-2 font-ff-headings\">\r\n                    Rs\r\n                    {(item.price - item.price * (item.discount / 100)).toFixed(\r\n                      2\r\n                    )}\r\n                  </li>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"]}